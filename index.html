<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IWP DA</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <h1> E-Commerce </h1>
        <ul>
            <li><a href="./products.html">Products</a></li>
            <li><a href="./index.html">Purchase</a></li>
        </ul>
    </nav>
    <div class="container">  
        <form id="contact">
          <h3>Purchase Form</h3>
          <h4>Enter The Product Details You Want To Purchase</h4>
          <fieldset id = "code">
            <input placeholder="Product ID 1" type="text"  required autofocus id="code1">
            <span> - </span>
            <input placeholder="Product ID 2" type="number"  required autofocus id="code2">
            <span class="helper"></span>
          </fieldset>
          <fieldset id="name">
            <input placeholder="Product Name" type="text"  required >
            <span class="helper"></span>
          </fieldset>
          <fieldset id="qty">
            <select placeholder="Quantity" required>
                <option value="0" selected>Quantity</option>
                <option value="1">1</option>
                <option value="2" >2</option>
                <option value="3" >3</option>
                <option value="4" >4</option>
                <option value="5" >5</option>
                <option value="6" >6</option>
                <option value="7" >7</option>
                <option value="8" >8</option>
                <option value="9" >9</option>
                <option value="10" >10</option>
            </select>
            <span class="helper"></span>
          </fieldset>
          <fieldset id="price">
            <input placeholder="price" type="number"  required>
            <span class="helper"></span>
          </fieldset>
          <fieldset id="total">
            <input placeholder="Total value" type="number"  required>
            <span class="helper"></span>
          </fieldset>
          <fieldset id="date">
            <input placeholder="Date Of Purchase" type="date"  required>
            <span class="helper"></span>
          </fieldset>
          <fieldset id="mobile">
            <input placeholder="Mobile No." type="number"  required>
            <span class="helper"></span>
          </fieldset>
          <fieldset id="email">
            <input placeholder="Email" type="email"  required>
            <span class="helper"></span>
          </fieldset>
          <fieldset>
            <button name="submit" type="submit" id="contact-submit" data-submit="...Sending">Submit</button>
          </fieldset>
        </form>
      </div>
      <script>
          document.querySelector('button').onclick = (e)=>{
              e.preventDefault();
              let code1 = document.getElementById("code1").value
              let code2 = document.getElementById("code2").value
              let re1 = /^[a-z]*/i
              let re2 = /^[0-9]*/i
              if((!re1.test(code1)) || code1.length!==3){
                console.log(code1)
                document.querySelector('#code .helper').innerHTML = "Input must be of 3 and 6 characters respectively."
                document.querySelector('#code .helper').style.display = "block"
              }
              if((!re2.test(code2)) || code2.toString().length!==6){
                  console.log(code2)
                document.querySelector('#code .helper').innerHTML = "Input must be of 3 and 6 characters respectively."
                document.querySelector('#code .helper').style.display = "block"
              }
              if(re2.test(code2) && code2.toString().length===6 && re1.test(code1) && code1.length===3){
                document.querySelector('#code .helper').style.display = "none";
              }
              let name = document.querySelector('#name input').value.length;
              if(!(name<50 && name>0)){
                document.querySelector('#name .helper').innerHTML = "Input must be of 1-50 characters"
                document.querySelector('#name .helper').style.display = "block" 
              }
              else{
                document.querySelector('#name .helper').style.display = "none"
              }
              let qty = parseInt(document.querySelector('#qty select').value)
              if((qty===0)){
                document.querySelector('#qty .helper').innerHTML = "Select A value from dropdown"
                document.querySelector('#qty .helper').style.display = "block" 
              }
              else{
                document.querySelector('#qty .helper').style.display = "none"
              }
              let price = parseInt(document.querySelector('#price input').value)
              if(!(price>100 && price<10000)){
                document.querySelector('#price .helper').innerHTML = "price should be less than 10000 and more than 100"
                document.querySelector('#price .helper').style.display = "block" 
              }
              else{
                document.querySelector('#price .helper').style.display = "none"
              }
              let total = parseInt(document.querySelector('#total input').value)
              if((total!==qty*price)){
                document.querySelector('#total .helper').innerHTML = "total should be equal to price * quantity"
                document.querySelector('#total .helper').style.display = "block" 
              }
              else{
                document.querySelector('#total .helper').style.display = "none"
              }
              let red = /^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]/
              let date = document.querySelector("#date input").value
              if(!(red.test(date))){
                console.log(date)
                document.querySelector('#date .helper').innerHTML = "Invalid Date"
                document.querySelector('#date .helper').style.display = "block"
              }
              else{
                document.querySelector('#date .helper').style.display = "none"
              }
              let mobile = document.querySelector("#mobile input").value
              let email = document.querySelector("#email input").value
              let re3 = /^[0]?[789]\d{9}$/
              let re4 = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
              if(!(re3.test(mobile))){
                console.log(mobile)
                document.querySelector('#mobile .helper').innerHTML = "Invalid Number"
                document.querySelector('#mobile .helper').style.display = "block"
              }
              else{
                document.querySelector('#mobile .helper').style.display = "none"
              }
              if(!(re4.test(email))){
                  console.log(email)
                document.querySelector('#email .helper').innerHTML = "Invalid Email."
                document.querySelector('#email .helper').style.display = "block"
              }
              else{
                document.querySelector('#email .helper').style.display = "none"
              }
          }
      </script>
</body>
</html>